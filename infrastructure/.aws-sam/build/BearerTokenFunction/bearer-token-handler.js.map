{
  "version": 3,
  "sources": ["../../../../../../../../private/var/folders/t2/zmzb6xk14197tqywykcsfkzc0000gp/T/tmpqjzkkaqq/lambdas/src/handlers/bearer-token-handler.ts"],
  "sourcesContent": ["import { LambdaInterface } from \"@aws-lambda-powertools/commons\";\n\nexport class BearerTokenHandler implements LambdaInterface {\n  public async handler(\n    event: any,\n    _context: unknown\n  ): Promise<any> {\n    const url = event.oAuthURL.value;\n    const data = {\n      client_secret: event.totp + event.clientSecret.value,\n      client_id: event.clientId.value,\n      grant_type: \"client_credentials\"\n    } as Record<string, string>;\n\n    const formBody = Object.keys(data).map(key => \n      encodeURIComponent(key) + '=' + encodeURIComponent(data[key])\n    ).join('&');\n\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'\n      },\n      body: formBody\n    });\n\n    const body = await response.json();\n\n    return {\n      token: body.access_token\n    }\n  }\n}\n\nconst handlerClass = new BearerTokenHandler();\nexport const lambdaHandler = handlerClass.handler.bind(handlerClass);"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,wBAAAE,EAAA,kBAAAC,IAAA,eAAAC,EAAAJ,GAEO,IAAME,EAAN,KAAoD,CACzD,MAAa,QACXG,EACAC,EACc,CACd,IAAMC,EAAMF,EAAM,SAAS,MACrBG,EAAO,CACX,cAAeH,EAAM,KAAOA,EAAM,aAAa,MAC/C,UAAWA,EAAM,SAAS,MAC1B,WAAY,oBACd,EAEMI,EAAW,OAAO,KAAKD,CAAI,EAAE,IAAIE,GACrC,mBAAmBA,CAAG,EAAI,IAAM,mBAAmBF,EAAKE,CAAG,CAAC,CAC9D,EAAE,KAAK,GAAG,EAYV,MAAO,CACL,OAHW,MARI,MAAM,MAAMH,EAAK,CAChC,OAAQ,OACR,QAAS,CACP,eAAgB,iDAClB,EACA,KAAME,CACR,CAAC,GAE2B,KAAK,GAGnB,YACd,CACF,CACF,EAEME,EAAe,IAAIT,EACZC,EAAgBQ,EAAa,QAAQ,KAAKA,CAAY",
  "names": ["bearer_token_handler_exports", "__export", "BearerTokenHandler", "lambdaHandler", "__toCommonJS", "event", "_context", "url", "data", "formBody", "key", "handlerClass"]
}
